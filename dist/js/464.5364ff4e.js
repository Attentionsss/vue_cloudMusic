"use strict";(self["webpackChunkvue_cloudmusic"]=self["webpackChunkvue_cloudmusic"]||[]).push([[464],{2464:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-main",[a("div",{staticClass:"left"},[a("h2",[e._v("编辑个人信息")]),a("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"45px",size:"small"}},[a("el-form-item",{attrs:{label:"昵称:"}},[a("el-input",{model:{value:e.editForm.nickname,callback:function(t){e.$set(e.editForm,"nickname",t)},expression:"editForm.nickname"}})],1),a("el-form-item",{attrs:{label:"介绍:"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.signature,callback:function(t){e.$set(e.editForm,"signature",t)},expression:"editForm.signature"}})],1),a("el-form-item",{attrs:{label:"性别:"}},[a("el-radio-group",{model:{value:e.editForm.gender,callback:function(t){e.$set(e.editForm,"gender",t)},expression:"editForm.gender"}},[a("el-radio",{attrs:{label:0}},[e._v("保密")]),a("el-radio",{attrs:{label:1}},[e._v("男")]),a("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1)],1),a("span",{staticClass:"btn btn-l border mr-20"},[e._v("取消")]),a("span",{staticClass:"btn btn-l btn-red",on:{click:e.editUserInfo}},[e._v("保存")])],1),a("div",{staticClass:"right"},[a("img",{attrs:{src:e.userInfo.avatarUrl,alt:""}}),a("span",{staticClass:"btn btn-l border block center",staticStyle:{margin:"15px 30px"},on:{click:function(t){e.editVisible=!0}}},[e._v("修改头像")])])]),a("el-dialog",{attrs:{visible:e.editVisible,width:"40%"},on:{"update:visible":function(t){e.editVisible=t}}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadUrl,headers:e.headers,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("span",{staticClass:"btn btn-l mr-10",on:{click:function(t){e.editVisible=!1}}},[e._v("取消")]),a("span",{staticClass:"btn btn-l btn-red"},[e._v("确定")])])],1)],1)},i=[],r={data(){return{userInfo:{},editForm:{gender:null,birthday:974885746324,nickname:"",province:41e4,city:410100,signature:""},editVisible:!1,uploadUrl:"http://localhost:3000/avatar/upload",imageUrl:"",headers:{}}},created(){this.initUserInfo()},methods:{initUserInfo(){this.userInfo=this.$route.query.userInfo,this.editForm.nickname=this.userInfo.nickname,this.editForm.signature=this.userInfo.signature,this.editForm.gender=this.userInfo.gender},async editUserInfo(){const{data:e}=await this.$http.get("/user/update",{params:this.editForm});if(200!==e.code)return this.$message.error("修改失败！");this.$message.success("修改成功！")},beforeAvatarUpload(e){const t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a}}},l=r,n=a(1001),o=(0,n.Z)(l,s,i,!1,null,"53596d68",null),d=o.exports}}]);
//# sourceMappingURL=464.5364ff4e.js.map